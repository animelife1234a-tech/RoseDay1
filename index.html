<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>For My loveeee üåπ</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

<style>
body{
 margin:0;
 font-family:Poppins;
 min-height:100vh;
 display:flex;
 justify-content:center;
 align-items:center;
 background:linear-gradient(160deg,#ffd1dc,#f6a5b5,#ff4e50);
 color:white;
}
#s5{
 text-align:center;
 padding-top:90px;
}
#s5 .btn{ margin-top:22px; }
.frontCenter{
 height:100%;
 display:flex;
 justify-content:center;
 align-items:center;
 text-align:center;
}

.frontInner{width:100%;max-width:320px;}

.card{
 width:92%;
 max-width:420px;
 height:520px;
 background:rgba(255,255,255,.18);
 backdrop-filter:blur(14px);
 border-radius:22px;
 padding:26px;
 box-shadow:0 15px 40px rgba(0,0,0,.25);
 display:flex;
 flex-direction:column;
 overflow:hidden;
}

h1{
 font-family:Dancing Script;
 font-size:28px;
 text-align:center;
}

input,.btn{
 width:100%;
 padding:16px;
 border:none;
 border-radius:30px;
 font-size:16px;
 margin-top:14px;
 box-sizing:border-box;
}

input{background:#f1f1f1;}
.btn{background:#ff2e63;color:white;}

/* proposal */

#choiceArea{position:relative;height:140px;margin-top:18px;}
.choiceBtn{
 width:160px;height:56px;border-radius:30px;border:none;
 background:#ff2e63;color:white;font-size:16px;position:absolute;
}

/* chat */

.screenCol{display:flex;flex-direction:column;height:100%;}
#chatWrap{flex:1;overflow-y:auto;margin-top:8px;}
.chat{display:flex;flex-direction:column;gap:8px;}

.bubble{
 padding:10px 12px;border-radius:14px;
 background:white;color:#333;
 animation:fade .35s ease;
}

@keyframes fade{
 from{opacity:0;transform:translateY(6px)}
 to{opacity:1}
}

/* game */

#game{
 position:relative;height:260px;
 background:rgba(255,255,255,.15);
 border-radius:16px;margin-top:12px;
 overflow:hidden;
}
.rose{position:absolute;font-size:26px;cursor:pointer;}

.hidden{display:none}
</style>
</head>

<body>

<div class="card">

<!-- S1 -->
<div id="s1" class="frontCenter">
<div class="frontInner">
<h1>Rose Day üåπ</h1>
<input id="nameInput" placeholder="Enter your name">
<button class="btn" id="continueBtn">Continue</button>
</div>
</div>

<!-- S2 -->
<div id="s2" class="hidden">
<h1 id="q"></h1>
<div id="noText" style="text-align:center;height:24px"></div>
<div id="choiceArea">
<button id="yesBtn" class="choiceBtn">Yes ‚ù§Ô∏è</button>
<button id="noBtn" class="choiceBtn">No üòú</button>
</div>
</div>

<!-- S3 CHAT -->
<div id="s3" class="hidden screenCol">
<h1>For You üåπ</h1>
<div id="chatWrap"><div id="chat" class="chat"></div></div>
<button id="gameStart" class="btn hidden">Let‚Äôs playyy a gamee üåπ</button>
</div>

<!-- S4 GAME -->
<div id="s4" class="hidden">
<h1>Catch Roses üåπ</h1>
<div id="game"></div>
<div id="score"></div>
</div>

<!-- S5 WIN -->
<div id="s5" class="hidden">
<h1>You Win üåπ</h1>
<div style="text-align:center;margin-top:14px">
You caught all my roses‚Ä¶<br><b>and my heart ‚ù§Ô∏è</b>
</div>
<button class="btn" id="playAgainBtn">Play again üåπ</button>
</div>

</div>

<script>
const $=id=>document.getElementById(id);

/* FLOW */

continueBtn.onclick=()=>{
 const n=nameInput.value||"Savii";
 q.innerText=`Will you be my Rose, ${n}? üåπ`;
 s1.classList.add("hidden");
 s2.classList.remove("hidden");
 yesBtn.style.left="0"; yesBtn.style.bottom="0";
 noBtn.style.right="0"; noBtn.style.bottom="0";
 noScale=1;
};

/* NO BUTTON */

let noScale=1;

function overlap(a,b){
 return !(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom);
}

noBtn.onclick=()=>{
 const area=choiceArea.getBoundingClientRect();
 const yes=yesBtn.getBoundingClientRect();
 noScale*=.85;
 noBtn.style.transform=`scale(${noScale})`;

 let x,y,r,tries=0;
 do{
  x=Math.random()*(area.width-noBtn.offsetWidth);
  y=Math.random()*(area.height-noBtn.offsetHeight);
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
  r=noBtn.getBoundingClientRect();
  tries++;
 }while(overlap(r,yes)&&tries<80);

 const msgs = [
  "Noo kyu üò≠",
  "Please yes üòÑ",
  "Think again üåπ",
  "Rose ko reject karogi? ü•∫",
  "Itna bhi kya sochna üòå",
  "Ek chance to banta hai ‚ù§Ô∏è",
  "Phir se try karo na üòä",
  "Dil se pooch ke dekho üí´",
  "Answer lock karne se pehle socho üòÑ",
  "Yeh button sharma raha hai üåπ",
  "Rose wait kar raha hai tumhare haan ka üå∏",
  "System says: yes better option üòå",
  "Retry recommended üíå",
  "Aapka final answer? üòÑ",
  "Sach wala answer do na ü•∫",
  "Hint: Yes looks good on you üåπ",
  "Are you sure sure? üòã",
  "Dil ne kya kaha? ‚ù§Ô∏è",
  "One more chance üòÑ",
  "Rose disappointed ho jayega üåπ"
];

 noText.innerText=msgs[Math.floor(Math.random()*msgs.length)];
};

/* YES ‚Üí CHAT */

yesBtn.onclick=()=>{
 s2.classList.add("hidden");
 s3.classList.remove("hidden");
 startChat();
};

/* CHAT */

const lines = [
  "For you, on Rose Day üåπ‚ú®",
  "Not just a flower‚Ä¶ but a thank you for being in my life ü§çüå∏",
  "You‚Äôre not ‚Äòjust important‚Äô, you‚Äôre the calm, the strength, the softness I lean on ü´∂üå∑",
  "Even on my worst days, your presence feels like comfort üåôüíû",
  "You make ordinary moments feel special without even trying üåº‚ú®",
  "If I could, I‚Äôd send you a rose for every time you stood by me üåπüåπ",
  "This little page is just a small way to say 'how much I love you and how much I appreciate your presence in my life ‚ù§Ô∏èüå∫'",
  "Happy Rose Day, Meraa cutuuu bettuuuuuu üåπü•∞"
];

function startChat(){
 chat.innerHTML="";
 let i=0;
 const t=setInterval(()=>{
  if(i>=lines.length){
    clearInterval(t);
    gameStart.classList.remove("hidden");
    return;
  }
  const d=document.createElement("div");
  d.className="bubble";
  d.innerText=lines[i];
  chat.appendChild(d);
  chatWrap.scrollTop=chatWrap.scrollHeight;
  i++;
 },1500);
}

/* GAME */

gameStart.onclick=()=>{
 s3.classList.add("hidden");
 s4.classList.remove("hidden");
 startGame();
};

playAgainBtn.onclick=()=>{
 s5.classList.add("hidden");
 s4.classList.remove("hidden");
 startGame();
};

function startGame(){

 const total=Math.floor(Math.random()*7)+9; // ‚úÖ FIXED ‚Üí 7‚Äì15
 let score=0,spawned=0,finished=0;

 game.innerHTML="";
 const scoreDiv = $("score");              // ‚úÖ FIXED
 scoreDiv.innerHTML="Score: 0";            // ‚úÖ FIXED

 const spawn=setInterval(()=>{
  if(spawned>=total){clearInterval(spawn);return;}
  spawned++;

  const r=document.createElement("div");
  r.className="rose"; 
  r.innerHTML="üåπ";
  r.style.left=Math.random()*90+"%";
  r.style.top="-30px";
  game.appendChild(r);

  let y=-30;
  const fall=setInterval(()=>{
    y+=5; 
    r.style.top=y+"px";
    if(y>260){
      r.remove();
      clearInterval(fall);
      finished++;
      check();
    }
  },30);

  r.onclick=()=>{
    r.remove();
    clearInterval(fall);
    score++;
    finished++;
    scoreDiv.innerHTML="Score: "+score;   // ‚úÖ FIXED
    check();
  };

 },500);

 function check(){
  if(finished === total){

    if(score === total){
      s4.classList.add("hidden");
      s5.classList.remove("hidden");
    } 
    else {
      showRetry();   // now exists
    }

  }
 }

 function showRetry(){                      // ‚úÖ FIXED ‚Äî added back
  const btn=document.createElement("button");
  btn.className="btn";
  btn.innerHTML="Try again to catch all my roses üåπ";
  btn.onclick=startGame;
  scoreDiv.appendChild(btn);
 }

}
</script>

</body>
</html>

